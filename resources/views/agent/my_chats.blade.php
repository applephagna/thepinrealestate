<div class="message-page">
  <div class="list-messages">
    <div class="message-content">
      <div class="item-empty">
		    No results found
		  </div>
      {{-- <div class="left-side">
        <div class="head">
          <h1 class="title">Chats</h1>
        </div>
        <div class="list-items" id="listing-topics">
          <ul class="list-unstyled mb-0 " id="list-topics"><li class="no_message">No Message</li></ul>
        </div>
      </div>
      <div class="right-side message_form_box">
        <div class="message_detail loading" id="message_detail">
          <div class="message_head">
            <div class="user_info" id="user_info">
              <a rel="nofollow" href="#" class="btn_show_phone">
              <div class="img"><img id="topic_user_image" class="midle" src="https://www.khmer24.com/khmer24-crm-33/template/img/default_profile.jpg" alt="profile"></div>
              <div class="detail">
                <div class="name" id="topic_user_name"></div>
                <div class="status" id="topic_user_online_status"></div>
              </div>
              </a>
              <div class="user_contact">
                <ul class="list-unstyled mb-0 " id="list-phones">
                </ul>
              </div>
            </div>
            <a class="adInfo" href="#" id="topic_ad_url">
              <div class="img"><img class="midle" id="topic_ad_adimg" src="http://imagescdn.khmer24.com/no_photo.jpg"></div>
              <div class="detail">
                <div class="title" id="topic_ad_adtitle"></div>
                <div class="price" id="topic_ad_adprice"></div>
              </div>
            </a>
          </div>
          <div class="option">
            <a href="#" class="btn_option"><span class="icon icon-more_vert"></span></a>
            <div class="list-option">
              <ul class="list-unstyled mb-0 ">
              <li class="item-block"><a href="#confirm_block" class="btn_block btn_popup">Block This User</a></li>
              <li class="item-unblock"><a href="#confirm_unblock" class="btn_unblock btn_popup">Unblock This User</a></li>
              <li><a href="#confirm_delete" class="btn_popup">Delete The Conversation</a></li>
              </ul>
            </div>
          </div>
          <div id="chat_info" class="">
            <div class="info-box">
              <span class="icon icon-warning"></span> <span id="message_status" class="text">This item has been removed.</span>
            </div>
          </div>
          <div class="message_body" id="message_body">
            <div class="list-chart">
              <ul id="list-message-detail" class="list-unstyled mb-0 ">
                <li class="item-loading"></li>
              </ul>
            </div>
            <div class="suggestion_message" id="suggestion_message">
              <div class="list-suggestion">
                <ul class="list-unstyled mb-0  buyer_suggestion">
                  <li><span class="text">Hi!</span></li>
                  <li><span class="text">Hi! Is still available?</span></li>
                  <li><span class="text">Hi! I'd like to buy it?</span></li>
                  <li><span class="text">Is the price negotiable?</span></li>
                  <li><span class="text">I'm interested!</span></li>
                  <li><span class="text">How do we deal?</span></li>
                </ul>
                <ul class="list-unstyled mb-0  seller_suggestion">
                  <li><span class="text">Hi!</span></li>
                  <li><span class="text">yes, It's available</span></li>
                  <li><span class="text">what's you offer?</span></li>
                  <li><span class="text">Sorry, the product has been sold!</span></li>
                  <li><span class="text">Yes, It's negotiable</span></li>
                  <li><span class="text">No, It's not negotiable</span></li>
                  <li><span class="text">I'm not interested</span></li>
                </ul>
              </div>
              <a class="close_suggestion" href="#close">X</a>
            </div>
          </div>
          <div id="message_foot" class="message_foot">
            <div id="stickers-box" class="stickers" style="display: none;">
              <div class="sticker-tab" id="sticker-tab">
                <ul class="list-unstyled mb-0 ">
                  <li class="active">
                    <a href="#sticker-face" class="btn-sticker-tab">
                      <span class="sticker">
                        <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/1.png">
                      </span>
                    </a>
                  </li>
                  <li>
                    <a href="#sticker-egg" class="btn-sticker-tab">
                      <span class="sticker">
                        <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/1.png">
                      </span>
                    </a>
                  </li>
                </ul>
              </div>
              <div class="sticker-lists">
                <ul id="sticker-face" class="list-unstyled mb-0  active row sticker-items">
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="1" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/1.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/1.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="2" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/2.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/2.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="3" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/3.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/3.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="4" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/4.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/4.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="5" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/5.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/5.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="6" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/6.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/6.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="7" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/7.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/7.png">
                    </span>
                    </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="8" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/8.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/8.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="9" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/9.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/9.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="10" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/10.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/10.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="11" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/11.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/11.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="12" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/12.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/12.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="13" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/13.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/13.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="14" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/14.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/14.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="15" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/15.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/15.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="16" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/16.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/16.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="17" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/17.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/17.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="18" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/18.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/18.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="19" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/19.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/19.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="20" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/20.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/20.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="21" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/21.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/21.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="22" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/22.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/22.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="23" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/23.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/23.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="24" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/24.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/24.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="25" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/25.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/25.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="26" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/26.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/26.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="27" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/27.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/27.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="28" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/28.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/28.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="29" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/29.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/29.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="30" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/30.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/30.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="31" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/31.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/31.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="32" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/32.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/32.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="33" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/33.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/33.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="34" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/34.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/34.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="35" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/35.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/35.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="face" data-value="36" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/36.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/face/36.png">
                  </span>
                  </a>
                  </li>
                  </ul>
                  <ul id="sticker-egg" class="list-unstyled mb-0  row sticker-items">
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="1" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/1.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/1.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="2" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/2.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/2.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="3" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/3.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/3.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="4" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/4.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/4.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="5" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/5.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/5.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="6" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/6.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/6.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="7" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/7.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/7.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="8" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/8.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/8.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="9" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/9.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/9.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="10" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/10.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/10.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="11" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/11.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/11.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="12" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/12.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/12.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="13" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/13.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/13.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="14" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/14.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/14.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="15" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/15.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/15.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="16" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/16.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/16.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="17" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/17.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/17.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="18" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/18.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/18.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="19" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/19.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/19.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="20" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/20.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/20.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="21" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/21.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/21.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="22" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/22.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/22.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="23" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/23.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/23.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="24" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/24.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/24.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="25" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/25.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/25.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="26" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/26.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/26.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="27" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/27.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/27.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="28" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/28.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/28.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="29" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/29.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/29.png">
                  </span>
                  </a>
                  </li>
                  <li>
                  <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="30" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/30.png">
                  <span class="sticker">
                  <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/30.png">
                  </span>
                  </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="31" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/31.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/31.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="32" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/32.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/32.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="33" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/33.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/33.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="34" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/34.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/34.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="35" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/35.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/35.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="36" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/36.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/36.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="37" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/37.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/37.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="38" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/38.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/38.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="39" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/39.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/39.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="40" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/40.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/40.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="41" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/41.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/41.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="42" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/42.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/42.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="43" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/43.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/43.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="44" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/44.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/44.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="45" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/45.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/45.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="46" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/46.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/46.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="47" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/47.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/47.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="48" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/48.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/48.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="49" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/49.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/49.png">
                    </span>
                    </a>
                  </li>
                  <li>
                    <a class="sticker-box btn-sticker" href="#" data-name="egg" data-value="50" data-img="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/50.png">
                    <span class="sticker">
                    <img src="https://www.khmer24.com/khmer24-crm-33/template/sticker/egg/50.png">
                    </span>
                    </a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="chat_form">
              <form action="https://www.khmer24.com/en/index.php/#message.html" id="message_form" method="post" accept-charset="utf-8">
                <input type="hidden" name="csrf_test_name" value="4ba5ac87da1662917323967797b8cb89">
                <input id="input_message" autocomplete="off" class="form-control" type="text" maxlength="255" name="message" placeholder="Message....">
                <button id="btn_send_message" disabled="">Send</button>
              </form> 
            </div>
            <div class="unblock_box">
              <div class="detail">
                <div class="enable_box">
                  <div><b>This user is currently blocked.</b></div>
                  <div>You can only send messages once you <a href="#confirm_unblock" class="btn_unblock btn_popup">Unblock</a> this user.</div>
                </div>
                <div class="disable_box">
                  This person isn't receiving message from you right now
                </div>
              </div>
            </div>
          </div>
          <div id="confirm_block" class="modal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title">Confirm</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">×</span>
                </button>
                </div>
                <div class="modal-body">
                <div class="text">Are you sure you want to block user?</div>
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn_popup_close" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger btn_popup_block">Block</button>
                </div>
              </div>
            </div>
          </div>

          <div id="confirm_unblock" class="modal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title">Confirm</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">×</span>
                </button>
                </div>
                <div class="modal-body">
                <div class="text">Are you sure you want to delete this Conversation?</div>
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn_popup_close" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary btn_popup_unblock">Unblock</button>
                </div>
              </div>
            </div>
          </div>

          <div id="confirm_delete" class="modal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
              <div class="modal-header">
              <h5 class="modal-title">Confirm</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
              </button>
              </div>
              <div class="modal-body">
              <div class="text">Are you sure you want to delete this Conversation?</div>
              </div>
              <div class="modal-footer">
              <button type="button" class="btn btn-secondary btn_popup_close" data-dismiss="modal">Cancel</button>
              <button type="button" class="btn btn-danger btn_popup_delete">Delete</button>
              </div>
              </div>
            </div>
          </div>

          <div id="alert_box" class="modal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title">Confirm</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">×</span>
                </button>
                </div>
                <div class="modal-body">
                <div class="text" id="alert_text"></div>
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn_popup_close" data-dismiss="modal">Cancel</button>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div> --}}
    </div>
  </div>
</div>
{{-- <script type="text/javascript">
			$(document).ready(function(){

				var is_first_load = true;

				var myID = 369136;
				var xhr_topics;
				var xhr_topic;
				var xhr_message;

				var first_message_id = 0;
				var last_send_message_id = 0;
				var last_message_id = 0;

				var base_url = 'https://www.khmer24.com/en/';

				var topic_id = 0;
				var adid = 0;
				var userid = 0;
				var loading=false;
				var last_message = [];
				var autoCheck=false;
				var enable_scroll = true;

				var enable_load_more_message = false;
				var enable_load_more_topics = false;

				var topics = [];

				var show_suggestion = true;

				var auto_loadMessage = false;

				
				var loading_messages = false;
				var loading_topics = false;
				var loading_topic = false;

				var base_url = 'https://www.khmer24.com/';
				function get_topics(ofset=0) {

					if(loading_topics==true) {
						return;
					}

					if(ofset>0) {
						$('#listing-topics').addClass('loading');
					}

					if(xhr_topics) {
						xhr_topics.abort();
					}

					loading_topics = true;

					xhr_topics = $.post(base_url+'chats/topics',{'ofset':ofset,'csrf_test_name':'4ba5ac87da1662917323967797b8cb89'},function(result){
						var n_send = 0;
						if(result.status==1) {
							if(result.data && result.data.length>0) {
								if(ofset==0 && topics.length==0) {
									enable_load_more_topics = true;
								}
								

								$.each(result.data, function(k, v) {
									var item = '';
									var item_class = '';

									if(v.last_message.folder=='send') {
										n_send++;
									}

									if(v.last_message.folder=='inbox' && v.last_message.is_read==0) {
										item_class = 'unread';
									}
									if(v.user.online_status.is_active) {
										item_class += ' online_active';
									}
									
									if(v.topic_id==topic_id) {
										item_class += ' active';
									}

									var message_type = '<span class="topic_type buy">Buy</span>';

									if(v.seller_id==myID) {
										message_type = '<span class="topic_type sell">Sell</span>';
									}


									item += '<li id="topic-'+v.topic_id+'" class="'+item_class+'">';
									item += '	<a href="#open" data-topic_id="'+v.topic_id+'" data-userid="'+v.user.userid+'" class="btn_topic">';
									item += '		<div class="image" style="background: url('+v.user.photo+') no-repeat center; background-size: cover;"></div>';
									item += '		<div class="detail">';
									item += '			<div class="name">'+v.user.name+'</div>';

									item += '			<div class="message">'+v.last_message.message+'</div>';
									item += '			<div class="status">'+message_type+'<time>'+v.last_message.send_date+'</time></div>';

									item += '			<span class="adImg"><img class="midle" src="'+v.ad.photo+'" alt="photo" /></span>';
									item += '		</div>';


									if(v.ad.status=='inactive') {
										item += '<div class="chat_info inactive"><span class="icon icon-warning"></span> '+v.ad.status_message+'</div>';
									}

									item += '	</a>';
									item += '</li>';


									// if(ofset>0) {
									// 	$('#list-topics').append(item);
									// } else {
										if(topics[v.topic_id] != undefined) {
											var old_topic = topics[v.topic_id];
											if(old_topic.updated_time!=v.updated_time) {
												if(v.topic_id==topic_id) {
													$('body').find('li#topic-0').remove();
												}
												$('body').find('li#topic-'+v.topic_id).remove();
												$('#list-topics').prepend(item);
												$('#list-topics').find('li.no_message').remove();
											}
										} else {
												if(v.topic_id==topic_id) {
													$('body').find('li#topic-0').remove();
												}
											$('#list-topics').append(item);
											$('#list-topics').find('li.no_message').remove();
										}
									// }

									topics[v.topic_id] = v;

								});


							} else {
								enable_load_more_topics = false;
								if(topics.length<=0) {
									$('#list-topics').html('<li class="no_message">No Message</li>');
								}
							}

							if(enable_load_more_topics==true) {
								setTimeout(function(){
						        	var listingtopics = $('#listing-topics');
						        	var oh = $(listingtopics).height();
						        	var s = $(listingtopics).scrollTop();
						        	var ih = $("#list-topics").height();
						        	if(ih<oh) {

						        			$("#list-topics").append('<li class="item-loading"></li>');
						        			loading_topics = false;
						        			get_topics($('body').find('ul#list-topics li').length-1);
						        	}
								}, 1000);
							}

						} else {

						}
						$('#list-topics').find('li.item-loading').remove();
						loading_topics = false;

						$('#listing-topics').removeClass('loading');

					},'json');
				}
				get_topics();

				
				$('body').on('click', '.btn_topic', function(e){
					e.preventDefault();

					if($(this).attr('data-topic_id')==topic_id) {
						return;
					}

					openChat($(this).attr('data-topic_id'));

				});


				function openChat(topicid) {
					topic_id = topicid;

					enable_load_more_message = false;
					first_message_id = 0;
					last_send_message_id = 0;
					last_message_id = 0;
					auto_loadMessage = false;
					$('#list-topics').find('li.active').removeClass('active');
					$('body').find('li#topic-'+topic_id).addClass('active');
					last_message = [];
					$('#message_detail').addClass('active');
					$('#message_detail').addClass('loading');
					$('#message_detail').find('div.option ').removeClass('active');
					$('#message_foot').removeClass('loading');

					unblock_message_view();
					// userid = $(this).attr('data-userid');
					$('#list-message-detail').html('<li class="item-loading"></li>');

					if(xhr_message) {
						loading_messages = false;
						xhr_message.abort();
					}
					if(xhr_topic) {
						loading_topic = false;
						xhr_topic.abort();
					}

					get_topic(topic_id,true);
					
					if(topic_id) {
						window.history.pushState({"html":'',"pageTitle":''},"", base_url+"chats/"+topic_id);
					}
					
				}

				
				function get_topic(topic,loadMessage=false) {

					if(loading_topic==true) {
						return;
					}

					if(xhr_topic) {
						xhr_topic.abort();
					}

					loading_topic = true;

					xhr_topic = $.post(base_url+'chats/topic',{'topic_id':topic,'adid':adid,'csrf_test_name':'4ba5ac87da1662917323967797b8cb89'},function(result){

						if(result.status==1) {

							if(result.data.topic_id) {

								if(topic_id==0) {
									window.history.pushState({"html":'',"pageTitle":''},"", base_url+"chats/"+result.data.topic_id);
								}

								topic_id = topic_id;
							}
							if(result.data.user.userid) {
								userid = result.data.user.userid;
							}

							if(result.data.ad.status=='active') {
								$('#chat_info').hide();
								$('#message_detail').removeClass('status-inactive');
							} else {
								$('#chat_info').show();
								$('#message_status').html(result.data.ad.status_message);
								$('#message_detail').addClass('status-inactive');
							}

							if(result.data.seller_id==myID) {
								$('#suggestion_message').addClass('seller_suggestion_items');
								$('#suggestion_message').removeClass('buyer_suggestion_items');
							} else {
								$('#suggestion_message').addClass('buyer_suggestion_items');
								$('#suggestion_message').removeClass('seller_suggestion_items');
							}

							if(result.data.user.online_status.is_active) {
								$('#user_info').addClass('online_active');
							} else {
								$('#user_info').removeClass('online_active');
							}

							$('#topic_ad_adimg').attr('src',result.data.ad.photo);
							$('#topic_ad_url').attr('href',result.data.ad.url);
							$('#topic_ad_adtitle').html(result.data.ad.title);
							$('#topic_ad_adprice').html(result.data.ad.price);

							$('#topic_user_name').html(result.data.user.name);
							$('#topic_user_image').attr('src',result.data.user.photo);
							$('#topic_user_online_status').html(result.data.user.online_status.last_active);

							$('#topic_id').val(result.data.ad.adid);

							$('#list-phones').html('');
							if(result.data.user.tel) {
								$.each(result.data.user.tel, function(k, v) {
									$('#list-phones').append('<li><a href="tel:'+v+'"><span class="icon icon-call"></span> '+v+'</a></li>');
								});
							} else {
								$('#list-phones').append('<li><a href="tel:'+result.data.user.phone+'"><span class="icon icon-call"></span> '+result.data.user.phone+'</a></li>');
							}

							$('#message_detail').removeClass('loading');

							if(result.data.user.user_block.is_block==true) {
								block_message_view(result.data.user.user_block.enable_unblock);
							} else {
								unblock_message_view();
							}

							if(loadMessage==true) {
								auto_loadMessage = true;
								get_messages(topic_id);
							}
						} else {
							$('#message_detail').removeClass('active');
							$('#message_detail').removeClass('loading');
							alert(result.info);
						}

						loading_topic = false;

					},'json');
				}



				function get_messages(topic,fid=0) {


					if(loading_messages==true) {
						return;
					}

					if(xhr_message) {
						xhr_message.abort();
					}

					loading_messages = true;

					xhr_message = $.post(base_url+'chats/messages',{'topic_id':topic,'first_message_id':fid,'csrf_test_name':'4ba5ac87da1662917323967797b8cb89'},function(result){

						$('#message_body').find('li.item-loading').remove();

						if(result.status==1) {
							if(result.data && result.data.length > 0) {
								var n = 0;
								var n_send = 0;
								var l_id = last_send_message_id;
								var isPlaySound = false;
								$.each(result.data, function(k, v) {
									if(v.folder=='send') {
										n_send++;
									}

									if(first_message_id==0 || parseInt(v.message_id) < first_message_id ) {
										first_message_id = parseInt(v.message_id);
									}

									if( (last_send_message_id==0 || parseInt(v.message_id) > last_send_message_id ) && v.folder == "send" ) {
										last_send_message_id = parseInt(v.message_id);
									}


									if( (last_message_id==0 || parseInt(v.message_id) > last_message_id )) {
										last_message_id = parseInt(v.message_id);
									}

									if(($.inArray(parseInt(v.message_id), last_message) > -1)) {

										if(v.folder=='send' && v.is_read==1 && parseInt(v.message_id)==last_send_message_id) {
											$('#list-message-detail').find('li.read').removeClass('read');
											$('body').find('li#message-'+parseInt(v.message_id)).addClass('read');
										}

									} else {
										last_message[last_message.length] = parseInt(v.message_id);
										n++;
										generate_chat(v,fid);

										if(v.folder=='inbox' && v.is_read==0) {
											isPlaySound = true;
										} else {
											isPlaySound = false;
										}
									}
									
								});
								if(n_send<1 && last_message.length<2) {
									$('#suggestion_message').show();
								} else {
									$('#suggestion_message').hide();
								}

								if( last_send_message_id > l_id) {
									var scr = $('#message_body')[0].scrollHeight;
									$('#message_body').scrollTop(scr);
									if(isPlaySound==true && is_first_load==false) {
										playSound();
									}									
								}


							} else {
								if(show_suggestion==true && last_message.length<=0) {
									$('#suggestion_message').show();
								}
							}
						}
						if(enable_scroll==true && n>0) {

							var scr = $('#message_body')[0].scrollHeight;
							$('#message_body').scrollTop(scr);
									
								if(isPlaySound==true && is_first_load==false) {
										playSound();
								}		

						}
						$('#message_detail').removeClass('loading');

						loading_messages = false;
						if(result.data && result.data.length > 0) {
							enable_load_more_message = true;
						} else {
							enable_load_more_message = false;
						}	
						

						if(fid) {
							load_old_message();
						}

						is_first_load = false;

					},'json');
				}

				var is_sending = false;
				$('#message_form').submit(function(event){
					event.preventDefault();
					if(is_sending==true) {
						return;
					}
					var message = $('#input_message').val();
					sendMessage(message);
					$('#suggestion_message').hide();
				});



				function sendMessage(message,data="") {

					if(message.length<1 && data == "") {
						$('#message_foot').removeClass('loading');
						$('#input_message').focus();
						return;
					}
					$('#message_foot').addClass('loading');
					if(topic_id || adid) {
						is_sending = true;
						$.post(base_url+'chats/send',{'topic_id':topic_id,'adid':adid,'message':message,'data':data,'csrf_test_name':'4ba5ac87da1662917323967797b8cb89'},function(result){
							if(result.status==1) {
								if(topic_id==0) {
									window.history.pushState({"html":'',"pageTitle":''},"", base_url+"chats/"+result.data.topic_id);
								}
								topic_id = result.data.topic_id;

								if(($.inArray(result.data.message_id, last_message) > -1)) {

								} else {
									last_message[last_message.length] = parseInt(result.data.message_id);
									generate_chat(result.data);
								}
								$('#input_message').val('');
							} else {
								$('#alert_text').html(result.info);
								$('#alert_box').modal('show');
							}

							var scr = $('#message_body')[0].scrollHeight;
							// $('#message_body').animate({scrollTop: scr},0);

							$('#message_body').scrollTop(scr);
							$('#message_foot').removeClass('loading');
							is_sending = false;
						},'json').fail(function() {
							is_sending = false;
							$('#message_foot').removeClass('loading');
						    alert( "Send message has been fail." );
							
						});
					}
				}


				$('#input_message').keyup(function(){
		            var text = $.trim($(this).val());
		            if(text.length>0) {
		                $('#btn_send_message').prop("disabled", false);
		            } else {
		                $('#btn_send_message').prop("disabled", true);
		            }
				});


				$('.btn-sticker').click(function(e){
					e.preventDefault();
					var name = $(this).attr('data-name');
					var value = $(this).attr('data-value');
					var image = $(this).attr('data-img');
					sendMessage('',{"name":name,"value":value,"image":image});
					$('#stickers-box').hide();
					$('#btn-show-sticker').removeClass('active');
				});
				$('#btn-show-sticker').click(function(e){
					e.stopPropagation();
					e.preventDefault();
					$(this).toggleClass('active');
					$('#stickers-box').toggle();
				});

				$('#stickers-box').click(function(e){
					e.stopPropagation();
					e.preventDefault();
				});

				$('.btn-sticker-tab').click(function(e){
					e.preventDefault();
					$('#sticker-tab').find('li').removeClass('active');
					$(this).closest('li').addClass('active');
					
					$('.sticker-items').removeClass('active');

					$($(this).attr('href')).addClass('active');

				});

				function generate_chat(val,fid=0) {
					var item = '';
					var item_class = 'to';
					if(val.folder=='inbox') {
						item_class = 'from';
					}

					item_class += ' '+val.type;

					var new_status = '';
					if(val.folder=='inbox' && val.is_read==0) {
						new_status = 'new_message';
					}

					item += '<li class="'+item_class+'" id="message-'+val.message_id+'">';
					if(val.type=='sticker') {
						item += '<div class="detail '+new_status+'"><img src="'+val.data.image+'"></div>';
					} else {
						item += '<div class="detail '+new_status+'">'+val.message+'</div>';
					}
					item += '<div><time>'+val.send_date+'</time></div>';
					item += '</li>';
					if(fid>0) {
						$('#list-message-detail').prepend(item);
					} else {
						$('#list-message-detail').append(item);
					}
					
					
					if(val.folder=='send' && val.is_read==1 && last_send_message_id==val.message_id) {
						$('#list-message-detail').find('li.read').removeClass('read');
						$('body').find('li#message-'+val.message_id).addClass('read');
					}

				}

				var messageInveral = setInterval(function(){ get_topics(); }, 5000);

				var myVar = setInterval(function(){
					if(topic_id && auto_loadMessage ==true ) {
						get_messages(topic_id);
					}
				}, 5000);

				var myVarTopic = setInterval(function(){
					if(topic_id && auto_loadMessage ==true ) {
						get_topic(topic_id);
					}
				}, 5000); //50000


				$('body').on('mouseover','#message_detail',function(){
					enable_scroll=false;
				});

				$('body').on('mouseleave','#message_detail',function(){
					enable_scroll=true;
				});

				$('.close_suggestion').click(function(e){
					e.preventDefault();
					$('#suggestion_message').hide();
					show_suggestion = false;
				});

				$('#suggestion_message li .text').click(function(e){
					e.preventDefault();
					// $('#suggestion_message').hide();
					sendMessage($(this).text());
				});

				$('body').on('click','.btn_option',function(e){
					e.stopPropagation();
					e.preventDefault();
					$(this).closest('div.option').toggleClass('active');
					$('#user_info').removeClass('show_phone_active');

					$('#stickers-box').hide();
					$('#btn-show-sticker').removeClass('active');

				});
				$('body').on('click','.list-option',function(e){
					e.stopPropagation();

				});

				$('body').on('click','.btn_popup',function(e){
					e.preventDefault();
					$(this).closest('div.option').removeClass('active');
					$($(this).attr('href')).modal('show');
				});


				$('body').on('click','.btn_popup_block',function(e){
					e.preventDefault();
					$('#confirm_block').modal('hide');
					block_message_view(true);
					
					$.post(base_url+'chats/block-user',{'userid':userid,'csrf_test_name':'4ba5ac87da1662917323967797b8cb89'},function(result){
					},'json');
				
				});

		        $(window).click(function() {
		            $('#message_detail').find('div.option').removeClass('active');
		            $('#user_info').removeClass('show_phone_active');


					$('#stickers-box').hide();
					$('#btn-show-sticker').removeClass('active');

		        });

		        $('body').on('click','.btn_popup_unblock',function(e){
		        	e.preventDefault();
		        	$('#message_detail').find('div.option').removeClass('active');
		        	$('#message_detail').addClass('loading');
		        	$('#confirm_unblock').modal('hide');

					$.post(base_url+'chats/unblock-user',{'userid':userid,'csrf_test_name':'4ba5ac87da1662917323967797b8cb89'},function(result){

						if(result.status==1 || result.status=='1') {
							$('#message_detail').removeClass('loading');
							unblock_message_view();
						} else {
							$('#message_detail').removeClass('loading');
							$('#alert_text').text(result.info);
							$('#alert_box').modal('show');
						}

					},'json');

		        });


		        function block_message_view(enable_unblock=false) {

					$('#message_detail').addClass('block');
					$('#input_message').prop("disabled", true);

					if($('#input_message').val().length) {
						$('#btn_send_message').prop("disabled", true);
					}
					
					if(enable_unblock==true) {
						$('#message_detail').addClass('enable_unblock');
						$('#message_detail').removeClass('disable_unblock');
					} else {
						$('#message_detail').removeClass('enable_unblock');
						$('#message_detail').addClass('disable_unblock');
					}
		        }

		        function unblock_message_view() {
					$('#message_detail').removeClass('block');
					$('#input_message').prop("disabled", false);
					$('#btn_send_message').prop("disabled", false);
					$('#message_detail').removeClass('enable_unblock');
					$('#message_detail').removeClass('disable_unblock');
		        }

		        $('body').on('click','.btn_popup_delete',function(e){
		        	e.preventDefault();
		        	
		        	$('#message_detail').addClass('loading');

					if(xhr_message) {
						loading_messages = false;
						xhr_message.abort();
					}
					if(xhr_topic) {
						loading_topic = false;
						xhr_topic.abort();
					}


		        	$('#confirm_delete').modal('hide');
					$.post(base_url+'chats/clear-chat',{'topic_id':topic_id,'csrf_test_name':'4ba5ac87da1662917323967797b8cb89'},function(result){


						$('#message_detail').removeClass('loading');
						
						if(result.status==1) {
							$('#message_detail').removeClass('active');
							$('body').find('li#topic-'+topic_id).remove();
							$('#list-message-detail').html('');
							first_message_id = 0;
							last_send_message_id = 0;
							last_message_id = 0;
							auto_loadMessage = false;					

							last_message = [];

							topic_id = 0;
							userid = 0;

						} else {
							loading_messages = true;
							loading_topic = true;
						}

					},'json');

		        });

		        $('#message_body').scroll(function(){


		        	load_old_message();

		            // var n = oh+s+50;
		            // if(n>=ih) {
		            //     if(not_loading==false) {
		            //         myTimer(true);
		            //     }
		            // }


		        });

		        function load_old_message() {
		            var oh = $('#message_body').height();
		            var ih = $("#list-message-detail").height();
		            var s = $('#message_body').scrollTop();
		            if((s-100) <= 0 ) {
		            	if(enable_load_more_message==true) {
		            		get_messages(topic_id,first_message_id);
		            	}            	
		            }
		        }


		        $('#listing-topics').scroll(function(){
		        	var oh = $(this).height();
		        	var s = $(this).scrollTop();
		        	var ih = $("#list-topics").height();
		        	if(((oh+s)+100)>=ih) {

		        		if(topics && enable_load_more_topics==true && loading_topics==false) {
		        			$("#list-topics").append('<li class="item-loading"></li>');
		        			get_topics($('#list-topics li').length);
		        		}
		        		
		        	}
		        });


				$('.btn_show_phone').click(function(e){
					e.stopPropagation();
					e.preventDefault();
					$('#message_detail').find('div.option').removeClass('active');
					$('#user_info').toggleClass('show_phone_active');

				});

							});

			window.onpopstate = function(e){
			    if(e.state){
			    	$('#message_detail').removeClass('loading');
			    	location.reload();
			    }
			};

			function playSound() {
				var audio = new Audio('https://www.khmer24.com/khmer24-crm-33/template/sound/notification-sound.mp3');
				audio.play();
			}

		</script>
 --}}